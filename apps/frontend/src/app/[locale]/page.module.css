.cube {
  position: relative;
  width: 160px;
  height: 160px;
  transform-style: preserve-3d;
}

.followWrapper {
  transform-style: preserve-3d;
  transition: transform 0.1s ease-out; /* Smooth transition for mouse follow */
}

.cubeFace {
  position: absolute;
  width: 100%;
  height: 100%;
  background: var(--cube-face-background, rgba(31, 41, 55, 0.6));
  border: 1px solid var(--cube-face-border, rgba(26, 28, 32, 0.6));
  box-shadow: inset 0 0 24px var(--cube-face-shadow, rgba(0, 0, 0, 0.25));
  will-change: transform;
  transform: translateZ(0);
}

.cubePulseWrapper {
  position: absolute;
  inset: 0;
  transform-style: preserve-3d;
  pointer-events: none;
  will-change: transform;
  transform-origin: center;
}

.cubePulsePaused .cubePulseFace {
  animation-play-state: paused;
}

.cubePulse {
  position: absolute;
  inset: 0;
  transform-style: preserve-3d;
}

.cubePulseFace {
  position: absolute;
  width: 100%;
  height: 100%;
  background: var(--cube-pulse-face-bg, rgba(31, 41, 25, 0.18));
  border: 1px solid var(--cube-pulse-border-color, rgba(191, 219, 254, 0.35));
  box-shadow:
    0 0 var(--cube-pulse-glow-radius, 48px) var(--cube-pulse-glow-color, rgba(148, 181, 255, 0.5)),
    inset 0 0 calc(var(--cube-pulse-glow-radius, 48px) * 0.35) var(--cube-pulse-glow-color, rgba(148, 181, 255, 0.5));
  will-change: opacity, transform;
  backface-visibility: visible;
  transform-style: preserve-3d;
  pointer-events: none;
  animation-name: cubePulseFace;
  animation-duration: calc(var(--cube-pulse-duration, 1200ms) + var(--cube-pulse-loop-delay, 400ms));
  animation-timing-function: var(--cube-pulse-easing, cubic-bezier(0.16, 1, 0.3, 1));
  animation-iteration-count: infinite;
  animation-delay: var(--cube-pulse-delay, 0ms);
  animation-fill-mode: both;
}

.cubePulseFace::before,
.cubePulseFace::after {
  content: '';
  position: absolute;
  inset: 0;
  border: inherit;
  background: inherit;
  opacity: var(--cube-pulse-edge-opacity, 0.42);
  box-shadow: 0 0 var(--cube-pulse-edge-blur, 42px) var(--cube-pulse-glow-color, rgba(148, 181, 255, 0.5));
  pointer-events: none;
  mix-blend-mode: screen;
}

.cubePulseFace::before {
  transform: translateZ(var(--cube-pulse-half-thickness, 5px));
}

.cubePulseFace::after {
  transform: translateZ(calc(var(--cube-pulse-half-thickness, 5px) * -1)) rotateY(180deg);
}

.cubePulseFaceSecondary {
  --cube-pulse-loop-delay: var(--cube-pulse-secondary-loop-delay, var(--cube-pulse-loop-delay, 400ms));
  animation-delay: var(--cube-pulse-secondary-delay, 200ms);
}

.cubeFront {
  transform: rotateY(0deg) translateZ(80px);
  border-width: 3px;
}
.cubeBack {
  transform: rotateY(180deg) translateZ(80px);
}
.cubeRight {
  transform: rotateY(90deg) translateZ(80px);
}
.cubeLeft {
  transform: rotateY(-90deg) translateZ(80px);
}
.cubeTop {
  transform: rotateX(90deg) translateZ(80px);
}
.cubeBottom {
  transform: rotateX(-90deg) translateZ(80px);
}

.innerCube {
  position: relative;
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  transform-origin: center center;
  pointer-events: none;
  animation-name: innerCubePulse;
  animation-duration: calc(var(--cube-pulse-duration, 1200ms) + var(--cube-pulse-loop-delay, 400ms));
  animation-timing-function: var(--cube-pulse-easing, cubic-bezier(0.16, 1, 0.3, 1));
  animation-iteration-count: infinite;
  animation-delay: var(--cube-pulse-delay, 0ms);
  animation-fill-mode: both;
}

.cubePulsePaused .innerCube {
  animation-play-state: paused;
}

@keyframes innerCubePulse {
  /* First pulse: start at 0% (matching outer cube primary pulse start) */
  0% {
    transform: scale3d(1, 1, 1);
  }

  /* First pulse: expand over 100ms (0ms to 100ms = 0% to 6.25%) */
  6.25% {
    transform: scale3d(
      var(--inner-cube-pulse-scale, 1.15),
      var(--inner-cube-pulse-scale, 1.15),
      var(--inner-cube-pulse-scale, 1.15)
    );
  }

  /* First pulse: shrink over 100ms */
  12.5% {
    transform: scale3d(1.05, 1.05, 1.05);
  }

  /* Second pulse: expand over 100ms to reach peak at 18.75% */
  18.75% {
    transform: scale3d(
      var(--inner-cube-pulse-scale, 1.25),
      var(--inner-cube-pulse-scale, 1.25),
      var(--inner-cube-pulse-scale, 1.25)
    );
  }

  80% {
    transform: scale3d(1, 1, 1);
  }

  /* Hold until loop repeats */
  100% {
    transform: scale3d(1, 1, 1);
  }
}

.innerCubeFace {
  background: var(--inner-cube-face-background, rgba(31, 41, 55, 0.18));
  border: 1px solid var(--inner-cube-face-border, rgba(19, 21, 25, 0.75));
  box-shadow: inset 0 0 12px var(--inner-cube-face-shadow, rgba(0, 0, 0, 0.2));
}

.cornerMarker {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  transform-style: preserve-3d;
  pointer-events: none;
}

.guideOverlay {
  position: absolute;
  inset: 0;
  z-index: 15;
  pointer-events: none;
  width: 100%;
  height: 100%;
}

.guideOverlay line {
  stroke-width: 1px;
  transition: opacity 0.2s ease;
}

.guideOverlay line[data-testid='tesseract-connecting-line'] {
  stroke-width: var(--tesseract-line-stroke-width, 1px);
  stroke: var(--tesseract-line-color, rgba(26, 28, 32, 0.4));
}

.paused {
  animation-play-state: paused;
}

/* Cursor styling */
.landingPage {
  cursor:
    url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><defs><radialGradient id="cursorGradient" cx="50%" cy="50%" r="50%"><stop offset="0%" stop-color="rgb(34, 42, 55)" stop-opacity="0.2"/><stop offset="100%" stop-color="rgb(34, 42, 55)" stop-opacity="0.6"/></radialGradient></defs><circle cx="12" cy="12" r="6" fill="url(%23cursorGradient)"/></svg>')
      12 12,
    auto;
}

@keyframes cubePulseFace {
  0% {
    transform: var(--cube-pulse-transform-start);
    opacity: var(--cube-pulse-opacity-start, 0.7);
  }

  65% {
    transform: var(--cube-pulse-transform-end);
    opacity: var(--cube-pulse-opacity-mid, 0.3);
  }

  100% {
    transform: var(--cube-pulse-transform-end);
    opacity: var(--cube-pulse-opacity-end, 0);
  }
}
